<TaskTemplate xmlns="https://robotics.ucmerced.edu/task">
    <CompositeTaskInformation>
        <TaskID>task_001</TaskID>
        <TaskDescription>Identify a red plant. If detected, take a next-best-view image; otherwise, identify a red cup. Finally, return to the origin point.</TaskDescription>
    </CompositeTaskInformation>
    <Preconditions>
        <Precondition>
            <Condition>atOrigin</Condition>
        </Precondition>
    </Preconditions>
    <AtomicTasks>
        <AtomicTask>
            <TaskID>identify_red_plant</TaskID>
            <TaskDescription>Identify a red plant in the environment.</TaskDescription>
            <Action>
                <ActionType>identifyObject</ActionType>
                <identifyObject>
                    <objectName>plant</objectName>
                    <objectColor>red</objectColor>
                </identifyObject>
            </Action>
            <Parameters/>
        </AtomicTask>
        <AtomicTask>
            <TaskID>next_best_view_image</TaskID>
            <TaskDescription>Take a next-best-view image of the identified red plant.</TaskDescription>
            <Action>
                <ActionType>nextBestView</ActionType>
                <nextBestView>
                    <resolution>8</resolution>
                </nextBestView>
            </Action>
            <Parameters/>
        </AtomicTask>
        <AtomicTask>
            <TaskID>identify_red_cup</TaskID>
            <TaskDescription>Identify a red cup in the environment.</TaskDescription>
            <Action>
                <ActionType>identifyObject</ActionType>
                <identifyObject>
                    <objectName>cup</objectName>
                    <objectColor>red</objectColor>
                </identifyObject>
            </Action>
            <Parameters/>
        </AtomicTask>
        <AtomicTask>
            <TaskID>return_to_origin</TaskID>
            <TaskDescription>Return to the origin point.</TaskDescription>
            <Action>
                <ActionType>goToPosition</ActionType>
                <goToPosition>
                    <x>0.0</x>
                    <y>0.0</y>
                    <z>0.0</z>
                    <roll>0.0</roll>
                    <pitch>0.0</pitch>
                    <yaw>0.0</yaw>
                </goToPosition>
            </Action>
            <Parameters/>
        </AtomicTask>
    </AtomicTasks>
    <ActionSequence>
        <Sequence>
            <TaskID>identify_red_plant</TaskID>
            <ConditionalActions>
                <Conditional>
                    <ReturnStatus>true</ReturnStatus>
                </Conditional>
                <Sequence>
                    <TaskID>next_best_view_image</TaskID>
                </Sequence>
            </ConditionalActions>
            <ConditionalActions>
                <Conditional>
                    <ReturnStatus>false</ReturnStatus>
                </Conditional>
                <Sequence>
                    <TaskID>identify_red_cup</TaskID>
                </Sequence>
            </ConditionalActions>
            <TaskID>return_to_origin</TaskID>
        </Sequence>
    </ActionSequence>
    <Outcome>
        <State>atOrigin</State>
    </Outcome>
    <Exits>
        <Exit>
            <Type>nominal</Type>
        </Exit>
    </Exits>
</TaskTemplate>
